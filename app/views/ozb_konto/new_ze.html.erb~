<h1>ZEKonto</h1>
<h2>Neues ZEKonto</h2>

<%= form_for @ozb_konto, :url => { :action => "create" }, :html => {:id => "newForm"}  do |f| %>

  <% if !@errors.nil? && @errors.any? %>
  <div id="error_explanation">
    <h2><%= @error_count %> Fehler <br /> Konnte kein Konto anlegen, weil:</h2>

    <ul>
      <% @errors.each do |error| %>
        <% if !error.nil? && error.any? %>
          <% error.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        <% end %>
      <% end %>
    </ul>
  </div>
  <% end %>

  <h2 style="margin-top:40px;">OZB-Konto</h2>
  <table>
    <tr>
      <td>Konto-Nr.:</td>
      <td><%= f.text_field :ktoNr %></td>
    </tr>
    <tr>
      <td>wSaldo:</td>
      <td><%= f.text_field :wSaldo %></td>
    </tr>
    <tr>
      <td>pSaldo:</td>
      <td><%= f.text_field :pSaldo %></td>
    </tr>
    <tr>
      <td>SaldoDatum:</td>
      <td><%= f.text_field :saldoDatum, :id => "saldoDatum" %></td>
    </tr>
    <tr>
      <td>KKL:</td>
      <td><%= text_field_tag :kkl%></td>
    </tr>
  </table>
  
  
  <!-- ZE-Konto:  :ktoNr, :eeKtoNr, :pgNr, :zeNr, :zeAbDatum, :zeEndDatum, :zeBetrag, 
                  :laufzeit, :zahlModus, :tilgRate, :ansparRate, :kduRate, :rduRate, :zeStatus -->
  <h2 style="margin-top:20px;">ZE-Konto</h2>
  <table>
    <tr>
      <td>ZE-Nr.:</td>
      <td><%= text_field_tag :zeNr %></td>
      <td />
    </tr>
    <tr>
      <td>EE-Konto-Nr.:</td>
      <td><%= text_field_tag :eeKtoNr, "", :id => "ktoNr" %></td>
      <td  class="searchlink_td"><%= link_to "Suchen...", "#searchKtoNrFrame", :id => "searchKtoNr", :class => "searchlink" %> </td>
    </tr>
    <tr>
      <td>AbDatum:</td>
      <td><%= text_field_tag :zeAbDatum, "", :id => "zeAbDatum" %></td>
      <td />
    </tr>
    <tr>
      <td>EndDatum:</td>
      <td><%= text_field_tag :zeEndDatum, "", :id => "zeEndDatum" %></td>
      <td />
    </tr>
    <tr>
      <td>Betrag:</td>
      <td><%= text_field_tag :zeBetrag %></td>
      <td />
    </tr>
    <tr>
      <td>Laufzeit:</td>
      <td><%= text_field_tag :laufzeit %></td>
      <td />
    </tr>
    <tr>
      <td>Zahlmodus:</td>
      <td><%= text_field_tag :zahlModus %></td>
      <td />
    </tr>
    <tr>
      <td>Tilgungs-Rate:</td>
      <td><%= text_field_tag :tilgRate %></td>
      <td />
    </tr>
    <tr>
      <td>Anspar-Rate:</td>
      <td><%= text_field_tag :ansparRate %></td>
      <td />
    </tr>
    <tr>
      <td>Kdu-Rate:</td>
      <td><%= text_field_tag :kduRate %></td>
      <td />
    </tr>
    <tr>
      <td>Rdu-Rate:</td>
      <td><%= text_field_tag :rduRate %></td>
      <td />
    </tr>
    <tr>
      <td>Status:</td>
      <td><%= text_field_tag :zeStatus %></td>
      <td />
    </tr>
  </table>  
  
  <br />
  
<% end %>

<table class="actions">
  <tr>
    <td><%= link_to "Abbrechen", "../", :class => "cancel_link" %></td>
    <td><%= link_to_function "Speichern", "this.form.submit()", :onclick => "$('#newForm').submit(); return false;", :class => "submit_ok"  %></td>
  </tr>
</table>

<div style="display:none">
  <div id="searchKtoNrFrame">
    <div id="konten"><%= render 'application/suche_konten' %></div>  
  </div>
</div>

<script>

  $(document).ready(function() {
    $("#searchKtoNr").fancybox();
    $("td.insertRow").css("display", "block");
  });

</script>

<script>
  $(function() {
    $( "#saldoDatum" ).datepicker({
      dateFormat: 'dd.mm.yy'
    });
    $( "#zeAbDatum" ).datepicker({
      dateFormat: 'dd.mm.yy'
    });
    $( "#zeEndDatum" ).datepicker({
      dateFormat: 'dd.mm.yy'
    });
  });
</script>
