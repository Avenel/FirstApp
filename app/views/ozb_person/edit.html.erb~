<h1>Editieren</h1>
<%= link_to "zurück", "/OZBPerson" %>

<%= form_tag({:action => "save"}, :id=>"editForm") do %>

<table>

	<tr>
		<td><%= label_tag "person:" %></td>
		<td><%= label_tag :mnr, @OZBPerson.mnr %></td>
    <%= hidden_field_tag :mnr, @OZBPerson.mnr %>
	</tr>
  
  	<tr>
    	<td><%= label_tag "Rolle:" %></td>
      <td><%= select_tag 'rolle', options_for_select(@Rollen, @Person.rolle), {:onChange => "alert('Test')"} %></td>
  	</tr>

    <% if @Person.rolle == "S" %>
    <div name="Student">
      <tr>
		    <td><%= label_tag "Ausbildungsbezeichnung:" %></td>
		    <td><%= text_field_tag :ausbildBez, @Student.ausbildBez %></td>
	    </tr>

  		<tr>
		    <td><%= label_tag "Institut:" %></td>
		    <td><%= text_field_tag :institutName, @Student.institutName %></td>
	    </tr>

  		<tr>
		    <td><%= label_tag "Studienort:" %></td>
		    <td><%= text_field_tag :studienort, @Student.studienort %></td> 
	    </tr>

  		<tr>
		  <td><%= label_tag "Studienbeginn:" %></td>
		  <td><%= text_field_tag :studienbeginn, @Student.studienbeginn %></td>  
	    </tr>

  		<tr>
		  <td><%= label_tag "Studienende:" %></td>
		  <td><%= text_field_tag :studienende, @Student.studienende %></td>  
	    </tr>

  		<tr>
		  <td><%= label_tag "Abschluss:" %></td>
		  <td><%= text_field_tag :abschluss, @Student.abschluss %></td>  
	    </tr>
  	</div>
  	<% end %>
  	
  	<% if @Person.rolle == "G" %>
  	<div name="Gesellschafter">
  		<tr>
			  <td><%= label_tag "FA Steuernummer:" %></td>
			  <td><%= text_field_tag :faSteuerNr, @Gesellschafter.faSteuerNr %></td>  
		  </tr>

  		<tr>
			  <td><%= label_tag "FA Lfd. Nr.:" %></td>
			  <td><%= text_field_tag :faLfdNr, @Gesellschafter.faLfdNr %></td>  
		  </tr>

  		<tr>
			  <td><%= label_tag "Wohnsitzfinanzamt:" %></td>
			  <td><%= text_field_tag :wohnsitzfinanzamt, @Gesellschafter.wohnsitzfinanzamt %></td>  
		  </tr>

  		<tr>
			  <td><%= label_tag "Notar:" %></td>
			  <td><%= text_field_tag :notartdnr, @Gesellschafter.notartdnr %></td>  
		  </tr>

  		<tr>
			  <td><%= label_tag "Beurkundungsdatum:" %></td>
			  <td><%= text_field_tag :beurkundungsdatum, @Gesellschafter.beurkundungsdatum %></td>  
		  </tr>
  	</div>
  	<% end %>
  	
  	<% if @Person.rolle == "F" %>
  	<div name="Foerdermitglied">
  		<tr>
			  <td><%= label_tag "Region" %></td>
			  <td><%= text_field_tag :region, @Foerdermitglied.region %></td>  
		  </tr>

  		<tr>
			  <td><%= label_tag "Förderbeitrag" %></td>
			  <td><%= text_field_tag :foerderbeitrag, @Foerdermitglied.foerderbeitrag %></td>  
		  </tr>
  	</div>
  	<% end %>
  	
  	<% if @Person.rolle == "M" %>
  	<div name="Mitglied">
  		<tr>
			  <td><%= label_tag "RV Datum:" %></td>
			  <td><%= text_field_tag :rvDatum, @Mitglied.rvDatum %></td>
		  </tr>
  	</div>
  	<% end %>
  	
  	<% if @Person.rolle == "P" %>
  	<div name="Partner">
  		<tr>
			  <td><%= label_tag "Partner:" %></td>
			  <td><%= text_field_tag :tdartner, @Partner.partner %></td>
		  </tr>
		
		  <tr>
			  <td><%= label_tag "Berechtigung" %></td>
			  <td><%= text_field_tag :berechtigung, @Partner.berechtigung %></td>
		  </tr>
  	</div>
  	<% end %>
	
 	<tr>
		<td><%= label_tag "Name:" %></td>
		<td><%= text_field_tag :name, @Person.name %></td>
	</tr>
	
	<tr>
		<td><%= label_tag "Vorname:" %></td>
		<td><%= text_field_tag :vorname, @Person.vorname %></td>
	</tr>
	
	<tr>
		<td><%= label_tag "Email:" %></td>
		<td><%= email_field_tag :email, @OZBPerson.email %></td>
	</tr>	
	
	<tr>
		<td><%= label_tag "passwort:" %></td>
		<td><%= password_field_tag 'password', @OZBPerson.password %></td>
	</tr>	
	  
	<tr>
		<td><%= label_tag "Geburtsdatum:" %></td>
		<td><%= text_field_tag :gebDatum, @Person.geburtsdatum %></td>
	</tr>  
	  
	<tr>
		<td><%= label_tag "Straße:" %></td>
		<td><%= text_field_tag :strasse, @Person.strasse %></td>
	</tr>
	
	<tr>
		<td><%= label_tag "tdLZ:" %></td>
		<td><%= text_field_tag :plz, @Person.plz %></td>
	</tr>
	
	<tr>
		<td><%= label_tag "Ort:" %></td>
		<td><%= text_field_tag :ort, @Person.ort %></td>
	</tr>
	
	<tr>
		<td><%= label_tag "Telefon:" %></td>
		<% if @Telefon[0] != nil %>
			<td><%= text_field_tag :telefon, @Telefon[0].telefonNr %></td>
		<% else %>
			<td><%= text_field_tag :telefon %></td>
		<% end %>
	</tr>
	
	<tr>
		<td><%= label_tag "Fax:" %></td>
		<% if @Fax[0] != nil %>		
			<td><%= text_field_tag :fax, @Fax[0].telefonNr %></td>
		<% else %>
			<td><%= text_field_tag :fax %></td>
		<% end %>
	</tr>
	
</table>
<!--  
	<tr>Bankverbindungen</tr>
	<table style="margin: 50tdx auto">
		<tr>
			<tr>
				Kontonummer
			</tr>
			<tr>
				BLZ
			</tr>
			
			<tr>				
			</tr>
			<tr>				
			
			</tr>
		</tr>
	<%# @Bankverbindungen.each do |bankverbindung| %>
		<tr>
			<tr>
				<%#= bankverbindung.bankKtoNr.to_s %>
			</tr>
			<tr>
				<%#= bankverbindung.blz.to_s %>
			</tr>
			<%# edit_link = "/Bankverbindung/" + bankverbindung.id.to_s %>
			<%# delete_link = "/Bankverbindung/" + bankverbindung.id.to_s + "/delete" %>
			<tr><%#= link_to "Editieren", edit_link %></tr>
			<tr><%#= link_to "Löschen", delete_link %></tr>
		</tr>  
	<%# end %>
	</table>
-->
	<%= link_to_function "Ok", "this.form.submit()", :onclick => "$('#editForm').submit(); return false;", :class => "submit_ok" %>	

<% end %>

<script>
  function show_role()
  {
    $("div#Foerdermitglied").hide();
      $("div#Student").hide();
      $("div#Mitglied").hide();
      $("div#tdartner").hide();
      $("div#Gesellschafter").hide();
      var role = $('select#rolle').val();
      switch (role) {
        case "F":
          $("div#Foerdermitglied").show();
          break;
        case "S":
          $("div#Student").show();
          break;
        case "G":
          $("div#Gesellschafter").show();
          break;
        case "td":
          $("div#tdartner").show();
          break;
        case "M":
          $("div#Mitglied").show();
          break;
        default:
    }
  }
</scritdt>
